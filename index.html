<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Keanu Portfolio</title>
  <meta name="description"
    content="Keanu Laurence Luca is a multi-disciplinary creative, DJ, producer, and creative director bridging music, art, and culture.">
  <link rel="canonical" href="https://1-earth.github.io/CLIENTWORK-TEMPORARY/Keanu/">
  <meta property="og:site_name" content="Keanu Laurence Luca">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Keanu Laurence Luca ‚Äî DJ, Producer & Creative Director">
  <meta property="og:description"
    content="Discover sets, productions, and creative direction work that bridge music, art, and culture.">
  <meta property="og:url" content="https://1-earth.github.io/CLIENTWORK-TEMPORARY/Keanu/">
  <meta property="og:image" content="https://1-earth.github.io/CLIENTWORK-TEMPORARY/Keanu/static/img/LogoNewLarge.png">
  <meta property="og:image:alt" content="Keanu Laurence Luca wordmark">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Keanu Laurence Luca ‚Äî DJ, Producer & Creative Director">
  <meta name="twitter:description"
    content="Multi-disciplinary creative and DJ delivering high-energy sets for brands and audiences worldwide.">
  <meta name="twitter:image" content="https://1-earth.github.io/CLIENTWORK-TEMPORARY/Keanu/static/img/LogoNewLarge.png">
  <script>
    (function () {
      var msg = "Coded by 'George Symonds (link: https://www.instagram.com/georgesymonds_/ )' through 'üåê 1 Earth Productions 2025 (link: https://www.1-earth.world/ )'";
      try { console.log(msg); } catch (_) { }
    })();
  </script>
  <link rel="stylesheet" href="static/styles/mainstyle.css">
  <link rel="icon" type="image/png" href="static/img/icon.png" sizes="32x32">
  <link rel="icon" type="image/png" href="static/img/icon.png" sizes="16x16">
  <style>
    /* Clamp and inline toggle for section descriptions */
    .work-section-description {
      position: relative;
    }

    .work-section-description p {
      margin: 0;
    }

    .work-section-description .clamp-4 {
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 4;
      line-clamp: 4;
      overflow: hidden;
    }

    .work-section-description .inline-read-toggle {
      display: inline-block;
      white-space: nowrap;
      vertical-align: baseline;
      margin-left: 0.35em;
    }

    /* Mobile-only: hide top controls when scrolled beyond threshold */
    @media (max-width: 768px) {
      .top-controls.mobile-hidden {
        display: none !important;
      }
    }
  </style>
</head>

<body>

  <script>(function () { try { document.documentElement.classList.add('is-loading'); } catch (_) { } })();</script>
  <!-- Fullscreen hamburger overlay menu -->
  <div class="menu-overlay" aria-hidden="true" role="dialog" aria-label="Site menu">
    <div class="overlay-center">
      <div class="overlay-logo">
        <img src="static/img/LogoNewLarge.png" alt="Keanu logo" class="overlay-logo-img">
      </div>
      <nav class="overlay-nav" aria-label="Main">
        <ul class="menu-list">
          <li class="menu-item"><a href="#dj" class="menu-link" data-target="dj">DJ</a></li>
          <li class="menu-item"><a href="#producer" class="menu-link" data-target="producer">PRODUCER</a></li>
          <li class="menu-item"><a href="#creative-director" class="menu-link" data-target="creative-director">CREATIVE
              DIRECTOR</a></li>
          <li class="menu-item"><a href="#contact" class="menu-link" data-target="contact">CONTACT</a></li>
        </ul>
        <div class="menu-social">
          <a class="icon-btn" href="https://www.instagram.com/keanulaurenceluca/" aria-label="Instagram">
            <img src="static/img/icon-instagram-white.svg" alt="Instagram">
          </a>
          <a class="icon-btn" href="https://open.spotify.com/artist/2DLHZ28eAcr6zDVYqlujDq?si=7Ceg13E0QzuzoEqwZhU6Sg" aria-label="Spotify">
            <img src="static/img/spotifyicon.png" width="15" height="15" alt="Spotify">
          </a>
          <a class="icon-btn" href="https://www.youtube.com/channel/UCV5C7Pa3zvjafTTE7fNdXzQ" aria-label="Youtube">
            <img src="static/img/icon-youtube-white.svg" alt="Youtube">
          </a>
        </div>
      </nav>
    </div>
  </div>
  <div class="loading-overlay" role="status" aria-live="polite">
    <a class="loading-logo" href="index.html" aria-label="Home">
      <img class="logo-img-small" src="static/img/LogoNewLarge.png" alt="Keanu logo">
    </a>
    <div class="loading-center">
      <img class="loading-spinner" src="static/img/loading.gif" loading="eager" decoding="async" alt=""
        aria-hidden="true">
      <div class="loading-text">Loading.</div>
    </div>
  </div>


  <!-- fixed background media -->
  <div class="sticky-background-media">
    <video autoplay muted loop playsinline class="background-video">
      <source src="static/video/background.mp4" type="video/mp4">
    </video>
  </div>

  <script src="static/scripts/sticky-logo.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>


  <div class="landing-container up-gradient-black-background">
    <!-- Top navigation / hamburger -->
    <div class="landing-top-row">
      <div class="top-controls" aria-label="Media controls">
        <button class="control-btn control-icon-btn" aria-label="Mute or unmute">
          <svg viewBox="0 0 24 24" width="23" height="23" aria-hidden="true">
            <path d="M 7 9 v 6 h 4 l 5 4 V 5 L 11 9 H 7 z" fill="currentColor"></path>
            <!-- <path d="M16 9.5l4 4m0-4l-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path> -->
          </svg>
        </button>
        <button class="control-btn control-pager-btn" aria-label="Skip backward or forward">
          <svg viewBox="0 0 64 24" width="60" height="23" aria-hidden="true">
            <!-- left triangle -->
            <polygon data-dir="prev" points="12,12 22,6 22,18" fill="currentColor"></polygon>
            <!-- right triangle -->
            <polygon data-dir="next" points="52,12 42,6 42,18" fill="currentColor"></polygon>
          </svg>
        </button>
        <button class="control-btn cta-live-btn" aria-label="Live at Boiler Room">
          <span class="cta-text">LIVE AT BOILER ROOM</span>
          <span class="cta-arrow" aria-hidden="true">‚ÜóÔ∏é</span>
        </button>
      </div>
      <button class="hamburger" aria-label="Open menu" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <!-- Bottom-aligned content bar -->
    <div class="landing-bottom-row">
      <div class="landing-logo" aria-label="Logo placeholder">
        <a href="index.html" aria-label="Refresh home">
          <img class="logo-img" src="static/img/LogoNewLarge.png" alt="Keanu logo">
        </a>
      </div>
      <div class="landing-copy">
        <h2>Multi-disciplinary creative and DJ who bridges music, art, and culture ‚Äî known for delivering versatile,
          high-energy sets across diverse audiences.</h2>
      </div>
    </div>
  </div>

  <!-- work container -->
  <div class="work-container">


    <div class="work-section-container down-gradient-black-background">
      <div class="work-section no-margin-side no-padding-bottom">
        <div class="work-section-title-container less-margin-bottom left-margin">
          <h1 class="work-section-title">Clients</h1>
        </div>

        <div class="clients-carousel">
          <div class="demoWrapper">
            <!-- Card One -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/nike_white.png" alt="Nike">
            </div>

            <!-- Card Two -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/puma_white.png" alt="Puma">
            </div>

            <!-- Card Three -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/redbull_white.png" alt="Red Bull">
            </div>

            <!-- Card Four  -->
            <div class="card box creative-pro ">
              <img class="card-img-top" src="static/img/client_logos/sohohouse_white.png" alt="Soho House">
            </div>

            <!-- Card Five -->
            <div class="card box creative-pro rounded-3x overflow-hidden w-md-50 w-lg-25">
              <img class="card-img-top" src="static/img/client_logos/koko_white.png" alt="KOKO">
            </div>

            <!-- Card Six -->
            <div class="card box creative-pro rounded-3x overflow-hidden w-md-50 w-lg-25">
              <img class="card-img-top" src="static/img/client_logos/boilerroom_white.png" alt="Boiler Room">
            </div>

            <!-- Card Seven -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/havanaclub_white.png" alt="Havana Club">
            </div>

            <!-- Card Eight -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/laylow_white.png" alt="Laylow">
            </div>

            <!-- Card Nine -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/rb_white.png" alt="RB">
            </div>

            <!-- Card Ten -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/sketch_white.png" alt="Sketch">
            </div>

            <!-- Card Eleven -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/tallyweijl_white.png" alt="Tally Weijl">
            </div>

            <!-- Card Twelve -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/thescotch_white.png" alt="The Scotch">
            </div>

            <!-- Card Thirteen -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/thestandard_white.png" alt="The Standard">
            </div>

            <!-- Card Fourteen -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/thetwentytwo_white.png" alt="The Twenty Two">
            </div>

            <!-- Card Fifteen -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/truereligon_white.png" alt="True Religion">
            </div>

            <!-- Card Sixteen -->
            <div class="card box creative-pro" style="max-width: 18rem;">
              <img class="card-img-top" src="static/img/client_logos/wraynephew_white.png" alt="Wray & Nephew">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="work-section-container black-background sticky-header-scroll">
      <div class="work-section ">

        <!-- <div class="work-section-title-container">
                    <h1 class="work-section-title">Portfolio</h1>
                </div> -->


        <h1>PORTFOLIO:</h1>
        <div class="pill-buttons">
          <button class="pill-btn" data-target="dj">DJ</button>
          <button class="pill-btn" data-target="producer">Producer</button>
          <!-- <button class="pill-btn" data-target="creative-director">Creative Director</button> -->
        </div>
      </div>
    </div>

    <div class="work-section-container down-gradient-black-background" data-section="dj" id="dj">
      <div class="work-section">

        <div class="work-section-header ">
          <div class="work-section-title-container">

            <h1 class="work-section-title">DJ</h1>
            <svg class="work-title-arrow" viewBox="0 0 120 90" aria-hidden="true">
              <!-- vertical then right arrow with rounded corner -->
              <path d="M12 4 V58 Q12 66 20 66 H92" fill="none" stroke="currentColor" stroke-width="4"
                stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M92 66 L80 54 M92 66 L80 78" fill="none" stroke="currentColor" stroke-width="4"
                stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
          <div class="work-section-description">
            <p>Keanu is a London-based DJ known for his refined, versatile sound and ability to curate the perfect
              atmosphere anywhere ‚Äî from fashion runways to nightlife institutions. Moving effortlessly across house,
              afro-electronic, and global rhythmic influences, his sets are defined by elegance, energy, and precision.
              He has performed for some of the world‚Äôs leading brands and cultural institutions, including Boiler Room,
              Nike, New Balance, SIZE?, the NFL, and Selfridges, as well as at London and Paris Fashion Week, where his
              sound has complemented runway shows, afterparties, and exclusive brand events. In addition to his brand
              collaborations, Keanu has supported major artists across both the American and London music scenes,
              showcasing his adaptability and wide-reaching appeal. <br>
              With ongoing residencies at The Standard, The Twenty Two, KOKO, and Soho House, Keanu continues to bring a
              sophisticated edge to every performance ‚Äî merging music, culture, and style into one seamless experience.
            </p>
          </div>

        </div>

        <div class="work-body-container">
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 1 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Portfolio Loading</h1>
            <p class="work-body-item-description">Description...</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 1">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 2 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Portfolio Loading</h1>
            <p class="work-body-item-description">Description</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 2">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 3 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Portfolio Loading</h1>
            <p class="work-body-item-description">Description</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 3">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
        </div>

        <!-- <h1>DJ</h1> -->
        <!-- <p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br> -->
      </div>
    </div>
    <div class="work-section-container down-gradient-black-background" data-section="producer" id="producer">
      <div class="work-section">
        <div class="work-section-header">
          <div class="work-section-title-container">
            <h1 class="work-section-title">Producer</h1>
            <svg class="work-title-arrow" viewBox="0 0 120 90" aria-hidden="true">
              <!-- vertical then right arrow with rounded corner -->
              <path d="M12 4 V58 Q12 66 20 66 H92" fill="none" stroke="currentColor" stroke-width="4"
                stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M92 66 L80 54 M92 66 L80 78" fill="none" stroke="currentColor" stroke-width="4"
                stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
          <div class="work-section-description">
            <p>Keanu is a forward-thinking music producer whose sound bridges global rhythm and contemporary electronic
              culture. Drawing inspiration from anything that feels raw ‚Äî from street energy to global percussion and
              underground movements ‚Äî his productions merge authenticity with refined, modern sound design, balancing
              emotion and precision.<br>
              He has released his debut single and produced music for brands such as Porto FC, with his work also
              featured on BBC Radio 1Xtra and platforms like Genius, showcasing his growing influence across both the
              music and cultural landscape.<br>
              Recently, he released a remix with London legend Wookie ‚Äî a pioneer of UK house and garage music ‚Äî further
              establishing himself among the new wave of UK producers pushing sound forward.</p>
          </div>

        </div>

        <div class="work-body-container">
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 1 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Portfolio Loading</h1>
            <p class="work-body-item-description">Description</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 1">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 2 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Portfolio Loading</h1>
            <p class="work-body-item-description">Description</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 2">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 3 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Portfolio Loading</h1>
            <p class="work-body-item-description">Description...</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 3">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
        </div>

        <!-- <h1>Producer</h1> -->
        <!-- <p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br><p>Work</p> <br><br><br> -->
      </div>
    </div>
    <!-- <div class="work-section-container down-gradient-black-background" data-section="creative-director"
      id="creative-director">
      <div class="work-section">
        <div class="work-section-header">
          <div class="work-section-title-container">
            <h1 class="work-section-title">Creative Director</h1>
            <svg class="work-title-arrow" viewBox="0 0 120 90" aria-hidden="true">
             
              <path d="M12 4 V58 Q12 66 20 66 H92" fill="none" stroke="currentColor" stroke-width="4"
                stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M92 66 L80 54 M92 66 L80 78" fill="none" stroke="currentColor" stroke-width="4"
                stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
          <div class="work-section-description">
            <p>Keanu is a multidisciplinary creative director shaping culture through sound, visual identity, and
              experience. With a background deeply rooted in music and design, his work explores the intersection
              between art direction, storytelling, and community ‚Äî creating worlds that feel both elevated and
              authentic. As the founder of Transparent, Keanu has curated immersive events, visual campaigns, and brand
              collaborations that merge underground energy with refined creative direction. He has also creatively
              directed a range of photoshoots and visual projects of his own, developing a distinct visual language that
              reflects his artistic vision and cultural influences. <br>
              Whether developing concepts for global brands or crafting intimate cultural experiences, Keanu‚Äôs creative
              direction is defined by clarity, intention, and a deep sense of identity.</p>
          </div>
        </div>

        <div class="work-body-container">
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 1 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Work 1</h1>
            <p class="work-body-item-description">Description about the work goes here. Short but not too short.</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 1">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 2 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Work 2</h1>
            <p class="work-body-item-description">Description about the work goes here. Short but not too short.</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 2">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
          <div class="work-body-item">
            <div class="work-media">
              <img src="static/img/placeholder.png" alt="Work 3 image">
              <div class="work-tags">
                <span class="work-tag">Live Set</span>
                <span class="work-tag">Consultancy</span>
              </div>
            </div>
            <h1 class="work-body-item-title">Work 3</h1>
            <p class="work-body-item-description">Description about the work goes here. Short but not too short.</p>
            <a class="view-more-btn" href="#" aria-label="View more about Work 3">View More... <span class="arrow"
                aria-hidden="true">‚ÜóÔ∏é</span></a>
          </div>
        </div>

      </div>
    </div> -->

  </div>

  <script>
    // Hamburger overlay toggle and smooth link navigation
    (function () {
      function qs(sel, root) { return (root || document).querySelector(sel); }
      function $all(sel, root) { return Array.prototype.slice.call((root || document).querySelectorAll(sel)); }
      var html = document.documentElement;
      var hamburger = qs('.hamburger');
      var overlay = qs('.menu-overlay');
      if (!hamburger || !overlay) return;

      function openMenu() {
        overlay.classList.add('is-open');
        hamburger.classList.add('is-active');
        hamburger.setAttribute('aria-expanded', 'true');
        overlay.setAttribute('aria-hidden', 'false');
        html.classList.add('menu-open');
      }

      function closeMenu() {
        overlay.classList.remove('is-open');
        hamburger.classList.remove('is-active');
        hamburger.setAttribute('aria-expanded', 'false');
        overlay.setAttribute('aria-hidden', 'true');
        html.classList.remove('menu-open');
      }

      function toggleMenu() {
        if (overlay.classList.contains('is-open')) closeMenu(); else openMenu();
      }

      hamburger.addEventListener('click', function (e) { e.preventDefault(); toggleMenu(); });
      overlay.addEventListener('click', function (e) { if (e.target === overlay) closeMenu(); });
      document.addEventListener('keydown', function (e) { var k = e.key || e.code; if (k === 'Escape') closeMenu(); });

      // Smooth scroll to sections and close
      $all('.menu-overlay [data-target]').forEach(function (a) {
        a.addEventListener('click', function (e) {
          e.preventDefault();
          var target = (a.getAttribute('data-target') || '').toLowerCase();
          var el = null;
          if (target === 'contact') { el = document.querySelector('footer'); }
          else { el = document.querySelector('.work-section-container[data-section="' + target + '"]') || document.getElementById(target); }
          if (el) {
            try { el.scrollIntoView({ behavior: 'smooth', block: 'start' }); }
            catch (_) { var r = el.getBoundingClientRect(); window.scrollTo(0, (window.scrollY || window.pageYOffset || 0) + r.top); }
          }
          closeMenu();
        });
      });
    })();

    // 3D logo carousel logic (scoped to Clients section)
    ; (function () {
      if (!window.gsap || !window.Draggable) return;
      gsap.registerPlugin(Draggable);

      var cards = gsap.utils.toArray('.clients-carousel .creative-pro'),
        dragDistancePerRotation = 3000,
        radius = 830,
        proxy = document.createElement('div'),
        progressWrap = gsap.utils.wrap(0, 1),
        spin = gsap.fromTo(cards, {
          rotationY: function (i) { return i * 360 / cards.length; }
        }, {
          rotationY: '-=360',
          duration: 30,
          ease: 'none',
          repeat: -1,
          transformOrigin: '50% 50% ' + (-radius) + 'px',
          onUpdate: updateOpacity
        }),
        startProgress,
        momentumTween;

      function calcRadius() {
        var wrapper = document.querySelector('.clients-carousel .demoWrapper');
        var w = wrapper ? wrapper.clientWidth : window.innerWidth || 1200;
        var base = Math.round(Math.min(830, Math.max(20, w * 0.75)));
        // On mobile, reduce the radius for a tighter ring; keep desktop unchanged
        var isMobile = window.matchMedia && window.matchMedia('(max-width: 768px)').matches;
        return isMobile ? Math.max(12, Math.round(base * 0.5)) : base;
      }

      function applyRadius() {
        radius = calcRadius();
        gsap.set(cards, { transformOrigin: '50% 50% ' + (-radius) + 'px' });
      }

      // Initial responsive radius
      applyRadius();
      // Keep responsive on resize
      window.addEventListener('resize', applyRadius);

      Draggable.create(proxy, {
        trigger: '.clients-carousel .demoWrapper',
        type: 'x',
        allowNativeTouchScrolling: true,
        onPress: function () {
          if (momentumTween) momentumTween.kill();
          gsap.killTweensOf(spin);
          spin.timeScale(0);
          startProgress = spin.progress();
        },
        onDrag: updateRotation,
        onRelease: function () {
          var vx = (this.getVelocity && this.getVelocity('x')) || 0;
          var speed = Math.abs(vx);
          if (speed < 100) { gsap.to(spin, { timeScale: 1, duration: 1 }); return; }
          var decel = 3000;
          var travelPx = (vx * vx) / (2 * decel) * Math.sign(vx);
          var deltaProgress = (-travelPx) / dragDistancePerRotation;
          var duration = Math.min(1.2, Math.max(0.25, speed / decel));
          var state = { p: spin.progress() };
          momentumTween = gsap.to(state, {
            p: state.p + deltaProgress,
            duration: duration,
            ease: 'power2.out',
            onUpdate: function () { spin.progress(progressWrap(state.p)); },
            onComplete: function () { gsap.to(spin, { timeScale: 1, duration: 1 }); }
          });
        }
      });

      function updateRotation() {
        var p = startProgress + (this.startX - this.x) / dragDistancePerRotation;
        spin.progress(progressWrap(p));
      }

      function updateOpacity() {
        for (var i = 0; i < cards.length; i++) {
          var angle = gsap.getProperty(cards[i], 'rotationY');
          var rad = ((angle % 360) * Math.PI) / 180;
          var c = Math.cos(rad);
          var minOpacity = 0.08;
          var opacity = ((c + 1) / 2) * (1 - minOpacity) + minOpacity;
          cards[i].style.opacity = opacity;
        }
      }

      updateOpacity();
    })();
  </script>
  <script>
    // Minimal loading overlay controller with slow-network early reveal
    (function () {
      function qs(sel) { return document.querySelector(sel); }
      function isSlow() {
        try {
          var nc = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
          if (!nc) return false;
          return !!nc.saveData || /^(slow-2g|2g|3g)$/i.test(nc.effectiveType || '');
        } catch (_) { return false; }
      }
      function firstActiveMedia() {
        var active = qs('.sticky-background-media .media-layer.is-active');
        if (!active) return null;
        var v = active.querySelector('video'); if (v) return v;
        var img = active.querySelector('img'); if (img) return img;
        return null;
      }
      function waitMediaReady(el, capMs) {
        return new Promise(function (resolve) {
          if (!el) { resolve(); return; }
          var to = setTimeout(done, Math.max(600, capMs || 2000));
          function cleanup() { try { el.removeEventListener('canplay', onCanPlay); el.removeEventListener('loadeddata', onCanPlay); el.removeEventListener('load', onLoad); el.removeEventListener('error', onLoad); } catch (_) { } clearTimeout(to); }
          function done() { cleanup(); resolve(); }
          function onCanPlay() { done(); }
          function onLoad() { done(); }
          if (el.tagName === 'VIDEO') {
            if (el.readyState >= 2) { done(); return; }
            el.addEventListener('canplay', onCanPlay);
            el.addEventListener('loadeddata', onCanPlay);
          } else {
            if (el.complete) { done(); return; }
            el.addEventListener('load', onLoad);
            el.addEventListener('error', onLoad);
          }
        });
      }
      function animateText(el) {
        var n = 1; return setInterval(function () { n = (n % 3) + 1; if (el) { el.textContent = 'Loading' + '.'.repeat(n); } }, 400);
      }
      function reveal(overlay) {
        try { document.documentElement.classList.remove('is-loading'); } catch (_) { }
        if (!overlay) return;
        overlay.classList.add('fade-out');
        setTimeout(function () { if (overlay && overlay.parentNode) { overlay.parentNode.removeChild(overlay); } }, 380);
      }
      function kick() {
        var overlay = qs('.loading-overlay'); if (!overlay) return;
        // Ensure GIF spinner always animates (force restart to avoid cached first-frame stall)
        try {
          var sp = overlay.querySelector('.loading-spinner');
          if (sp && sp.tagName === 'IMG' && sp.src) {
            var base = sp.src;
            // Strip any existing r= cachebuster
            base = base.replace(/([?&])r=\d+(&)?/, function (_, a, b) { return b ? a : ''; }).replace(/[?&]$/, '');
            sp.src = base + (base.indexOf('?') > -1 ? '&' : '?') + 'r=' + Date.now();
          }
        } catch (_) { }
        var textEl = overlay.querySelector('.loading-text');
        var timer = animateText(textEl);
        var started = false;
        function startOnce() { if (started) return; started = true; run(); }
        function run() {
          var el = firstActiveMedia();
          if (!el) { setTimeout(run, 60); return; }
          var fast = !isSlow();
          waitMediaReady(el, fast ? 1400 : 900).then(function () {
            clearInterval(timer);
            reveal(overlay);
          });
        }
        // Prefer waiting for work content, then evaluate readiness
        document.addEventListener('work:rendered', startOnce, { once: true });
        // Fallback start in case event doesn't fire quickly
        setTimeout(startOnce, 700);
      }
      if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', kick); } else { kick(); }
    })();
  </script>

  <script>
    // Mobile-only: hide .top-controls after scrolling past 85% viewport height
    (function () {
      function isMobile() { return window.matchMedia('(max-width: 768px)').matches; }
      function updateTopControls() {
        var el = document.querySelector('.top-controls');
        if (!el) return;
        if (isMobile() && window.scrollY >= window.innerHeight * 0.75) {
          el.classList.add('mobile-hidden');
        } else {
          el.classList.remove('mobile-hidden');
        }
      }
      window.addEventListener('scroll', updateTopControls, { passive: true });
      window.addEventListener('resize', updateTopControls);
      window.addEventListener('load', updateTopControls);
      updateTopControls();
    })();
  </script>

  <script>
    // Background media player: auto/manual/scroll with crossfade
    (function () {
      var AUTO_INTERVAL_MS = 5000;
      var FADE_MS = 350;
      var AUDIO_FADE_MS = 900;
      var AUTO_RESUME_MS = 15000;

      var container = document.querySelector('.sticky-background-media');
      if (!container) { return; }

      // Hide legacy background video if present
      var legacyVideo = container.querySelector('.background-video');
      if (legacyVideo) { legacyVideo.style.display = 'none'; }

      // Stage with two layers for crossfade
      var stage = document.createElement('div');
      stage.className = 'background-stage';
      var layerA = document.createElement('div');
      var layerB = document.createElement('div');
      layerA.className = 'media-layer';
      layerB.className = 'media-layer';
      stage.appendChild(layerA);
      stage.appendChild(layerB);
      container.appendChild(stage);
      // Hidden bin for preloading upcoming media
      var preloadBin = document.createElement('div');
      preloadBin.className = 'background-preload-bin';
      preloadBin.style.position = 'absolute';
      preloadBin.style.width = '0';
      preloadBin.style.height = '0';
      preloadBin.style.overflow = 'hidden';
      preloadBin.style.opacity = '0';
      preloadBin.style.pointerEvents = 'none';
      container.appendChild(preloadBin);

      var layers = [layerA, layerB];
      var activeIndex = 0; // which layer is visible

      var items = [];
      var current = 0;
      var mode = 'auto'; // 'auto' | 'manual' | 'scroll'
      var autoTimer = null;
      var autoResumeTimer = null;
      var isMuted = false; // try audio on initially
      var scrollRaf = null;
      var lastActiveIdx = -1;
      // Predictive preload + cache controls
      var mediaCache = new Map(); // src -> { el, type: 'video', lastUsed }
      var MAX_CACHE = 6;
      var lastDirection = 1; // 1 = forward, -1 = backward
      var saveData = false, effectiveType = '4g';
      try {
        var nc = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        if (nc) { saveData = !!nc.saveData; effectiveType = nc.effectiveType || effectiveType; }
      } catch (_) { }
      var slowNetwork = saveData || /^(slow-2g|2g|3g)$/i.test(effectiveType || '');

      function selectEl(root, sel) { return root ? root.querySelector(sel) : null; }

      function collectItems() {
        items = Array.prototype.slice.call(document.querySelectorAll('.work-body-item:not([data-collapsed="true"])')).map(function (el) {
          var type = (el.getAttribute('data-media-type') || '').toLowerCase();
          var src = el.getAttribute('data-media-src') || '';
          var poster = el.getAttribute('data-media-poster') || '';
          if (!type || !src) {
            // Fallback to first media inside card
            var img = selectEl(el, '.work-media img');
            if (img && img.src) { type = 'image'; src = img.src; }
          }
          var titleEl = selectEl(el, '.work-body-item-title');
          var linkEl = selectEl(el, '.view-more-btn');
          var title = titleEl ? (titleEl.textContent || '').trim() : '';
          var href = linkEl && linkEl.href ? linkEl.href : '';
          return { el: el, type: type || 'image', src: src, poster: poster || '', title: title, href: href };
        }).filter(function (it) { return !!it.src; });
      }
      function updateCtaForCurrent() {
        var btn = document.querySelector('.cta-live-btn');
        var textEl = btn ? btn.querySelector('.cta-text') : null;
        var item = items[current];
        if (!btn || !textEl || !item) { return; }
        var title = item.title || 'View project';
        textEl.textContent = title;
        try { textEl.setAttribute('data-text', title); textEl.setAttribute('data-base-text', title); } catch (_) { }
        btn.setAttribute('data-href', item.href || '');
        btn.disabled = !item.href;
        try { if (typeof ensureCtaFilled === 'function') { setTimeout(ensureCtaFilled, 0); } } catch (_) { }
      }

      // Ensure marquee text inside CTA is long enough to always cover the button
      function ensureCtaFilled() {
        var btn = document.querySelector('.cta-live-btn');
        var textEl = btn ? btn.querySelector('.cta-text') : null;
        if (!btn || !textEl) return;
        var base = (textEl.getAttribute('data-base-text') || textEl.getAttribute('data-text') || textEl.textContent || '').trim();
        if (!base) return;
        // Reset to a single copy for accurate measurement
        textEl.textContent = base;
        var btnW = btn.clientWidth || 0;
        var textW = textEl.scrollWidth || 0;
        if (!btnW || !textW) return;
        // Target ~3x button width to avoid any empty state during scroll
        var repeats = 10;
        var parts = [];
        for (var i = 0; i < repeats; i++) {
          if (i === 0) { parts.push(base); }
          else {
            var sep = '\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u2022\u00A0\u00A0\u00A0'; // NBSPs + bullet + NBSPs
            parts.push(sep + base);
          } // bullet between copies with larger space
        }
        var mainTrack = parts.join('');
        textEl.textContent = mainTrack; // starts without a leading bullet
        // appended track begins with a bullet to ensure a separator at the seam
        var appendedTrack = '\u00A0\u00A0\u00A0\u2022\u00A0\u00A0\u00A0' + mainTrack;
        try { textEl.setAttribute('data-text', appendedTrack); } catch (_) { }
        // Uniform marquee speed across varying text widths: set duration from width
        try {
          var trackWidth = textEl.scrollWidth || 0;
          var PX_PER_SEC = 100; // constant speed
          var durationSec = Math.max(60, trackWidth / PX_PER_SEC);
          textEl.style.animationDuration = durationSec + 's';
        } catch (_) { }
        // Restart marquee so new text appears immediately at start
        try {
          textEl.style.animation = 'none';
          textEl.style.transform = 'translateX(0)';
          // force reflow
          void textEl.offsetHeight;
          textEl.style.animation = '';
        } catch (_) { }
      }
      // Refill on resize (throttled via rAF)
      window.addEventListener('resize', function () {
        if (ensureCtaFilled._raf) return;
        ensureCtaFilled._raf = requestAnimationFrame(function () {
          ensureCtaFilled._raf = null;
          ensureCtaFilled();
        });
      });

      function clearLayer(layer) {
        while (layer.firstChild) layer.removeChild(layer.firstChild);
      }

      function ensureMediaVisible() {
        var aHas = !!layers[0].firstChild;
        var bHas = !!layers[1].firstChild;
        if (!aHas && !bHas) {
          // Attempt to re-show current item or fallback to first
          var idx = (typeof current === 'number' && current >= 0) ? current : 0;
          swapTo(idx);
        }
      }

      // Linear volume fade helper
      function fadeVolume(video, from, to, durationMs, onDone) {
        if (!video) { if (onDone) onDone(); return function () { }; }
        var start = null;
        var cancelled = false;
        var delta = (to - from);
        try { video.volume = Math.max(0, Math.min(1, from)); } catch (_) { }
        function step(ts) {
          if (cancelled) return;
          if (!start) start = ts;
          var t = Math.min(1, (ts - start) / Math.max(1, durationMs || 0));
          var v = from + delta * t;
          try { video.volume = Math.max(0, Math.min(1, v)); } catch (_) { }
          if (t < 1) { requestAnimationFrame(step); } else { if (onDone) onDone(); }
        }
        requestAnimationFrame(step);
        return function cancel() { cancelled = true; };
      }

      function finishOldVideoCleanup(oldVid) {
        if (!oldVid) return;
        try { oldVid.pause(); } catch (_) { }
        try {
          var s = oldVid.querySelector('source');
          var src = s && s.src;
          if (src) {
            oldVid.setAttribute('data-preload-src', src);
            cachePut(src, oldVid, 'video');
            preloadBin.appendChild(oldVid);
          }
        } catch (_) { }
        try {
          var parent = oldVid.parentNode;
          if (parent && parent.classList && parent.classList.contains('media-layer') && !parent.classList.contains('is-active')) {
            clearLayer(parent);
            ensureMediaVisible();
          }
        } catch (_) { }
      }

      function crossfadeAudio(oldVid, newVid, durationMs) {
        // Fade out the old video's audio
        if (oldVid) {
          try { oldVid.setAttribute('data-defer-clear', '1'); } catch (_) { }
          if (!oldVid.muted) {
            var from = (typeof oldVid.volume === 'number') ? oldVid.volume : 1;
            fadeVolume(oldVid, from, 0, durationMs || AUDIO_FADE_MS, function () {
              try { oldVid.removeAttribute('data-defer-clear'); } catch (_) { }
              finishOldVideoCleanup(oldVid);
            });
          } else {
            try { oldVid.removeAttribute('data-defer-clear'); } catch (_) { }
            finishOldVideoCleanup(oldVid);
          }
        }
        // Fade in the new video's audio
        if (newVid) {
          if (isMuted) {
            try { newVid.muted = true; newVid.volume = 0; } catch (_) { }
            return;
          }
          try { newVid.muted = false; newVid.volume = 0; } catch (_) { }
          var startFadeIn = function () { if (!newVid.muted) { fadeVolume(newVid, 0, 1, durationMs || AUDIO_FADE_MS); } };
          if (newVid.readyState >= 2 && !newVid.paused) { startFadeIn(); }
          else { newVid.addEventListener('play', startFadeIn, { once: true }); }
        }
      }

      function cacheGet(src) {
        if (!src) return null;
        var entry = mediaCache.get(src);
        if (entry) { entry.lastUsed = Date.now(); }
        return entry || null;
      }

      function getActiveSrcs() {
        var set = new Set();
        for (var li = 0; li < layers.length; li++) {
          var v = layers[li].querySelector('video');
          if (v) { var s = v.querySelector('source'); if (s && s.src) set.add(s.src); }
        }
        return set;
      }

      function evictIfNeeded() {
        if (mediaCache.size <= MAX_CACHE) return;
        var protect = getActiveSrcs();
        try { var ni = Math.min(items.length - 1, Math.max(0, current + 1)); var nsrc = items[ni] && items[ni].src; if (nsrc) protect.add(nsrc); } catch (_) { }
        var oldestKey = null; var oldest = Infinity;
        mediaCache.forEach(function (v, k) { if (!protect.has(k) && v.lastUsed < oldest) { oldest = v.lastUsed; oldestKey = k; } });
        if (oldestKey) {
          var entry = mediaCache.get(oldestKey);
          try { if (entry && entry.el && entry.el.parentNode === preloadBin) { preloadBin.removeChild(entry.el); } } catch (_) { }
          mediaCache.delete(oldestKey);
        }
      }

      function cachePut(src, el, type) {
        if (!src || !el) return;
        mediaCache.set(src, { el: el, type: type || 'video', lastUsed: Date.now() });
        evictIfNeeded();
      }

      function createMediaElement(item) {
        if (item.type === 'video') {
          // Prefer cache reuse
          var cached = cacheGet(item.src);
          var v = cached && cached.el && cached.el.tagName === 'VIDEO' ? cached.el : null;
          if (!v) {
            // Try to reuse a preloaded video element for instant start
            v = (function () {
              var vids = preloadBin.querySelectorAll('video[data-preload-src]');
              for (var i = 0; i < vids.length; i++) {
                if (vids[i].getAttribute('data-preload-src') === item.src) {
                  vids[i].removeAttribute('data-preload-src');
                  return vids[i];
                }
              }
              return null;
            })();
          }
          if (!v) { v = document.createElement('video'); }
          v.playsInline = true; // iOS
          v.autoplay = true;
          v.loop = true;
          v.preload = 'auto';
          v.muted = !!isMuted;
          // Start at 0 to allow smooth fade-in
          try { v.volume = 0; } catch (_) { }
          if (item.poster) v.setAttribute('poster', item.poster);
          // If the video had no source (fresh element), attach one
          if (!v.querySelector('source')) {
            var srcEl = document.createElement('source');
            srcEl.src = item.src;
            var ext = (item.src.split('?')[0].split('.').pop() || '').toLowerCase();
            var mime = (ext === 'mp4') ? 'video/mp4' : (ext === 'webm' ? 'video/webm' : '');
            if (mime) srcEl.type = mime;
            v.appendChild(srcEl);
          }
          try { cachePut(item.src, v, 'video'); } catch (_) { }
          // try to play with current mute state
          setTimeout(function () {
            var p = v.play();
            if (p && typeof p.then === 'function') {
              p.catch(function () {
                // Autoplay with audio failed; fallback to muted
                v.muted = true;
                isMuted = true;
                try { updateMuteButton(); } catch (_) { }
                v.play().catch(function () { /* ignore */ });
              });
            }
          }, 0);
          return v;
        } else {
          var img = document.createElement('img');
          img.src = item.src;
          img.alt = '';
          return img;
        }
      }

      function ensureVideoPreloaded(src, poster) {
        if (!src) return;
        if (mediaCache.has(src)) { cacheGet(src); return; }
        for (var li = 0; li < layers.length; li++) {
          var activeVid = layers[li].querySelector('video');
          if (activeVid) { var s = activeVid.querySelector('source'); if (s && s.src === src) return; }
        }
        var v = document.createElement('video');
        v.setAttribute('data-preload-src', src);
        v.playsInline = true;
        v.muted = true;
        v.loop = true;
        v.preload = 'auto';
        if (poster) v.setAttribute('poster', poster);
        var sEl = document.createElement('source');
        sEl.src = src;
        var ext = (src.split('?')[0].split('.').pop() || '').toLowerCase();
        var mime = (ext === 'mp4') ? 'video/mp4' : (ext === 'webm' ? 'video/webm' : '');
        if (mime) sEl.type = mime;
        v.appendChild(sEl);
        preloadBin.appendChild(v);
        try { v.load(); } catch (_) { }
        cachePut(src, v, 'video');
      }

      function addLinkPreload(src, asType) {
        if (!src) return;
        try {
          var olds = document.querySelectorAll('link[rel="preload"][data-dyn-preload="1"]');
          olds.forEach(function (n) { if (n && n.parentNode) n.parentNode.removeChild(n); });
          var link = document.createElement('link');
          link.rel = 'preload';
          link.as = asType || 'video';
          link.href = src;
          link.setAttribute('data-dyn-preload', '1');
          document.head.appendChild(link);
        } catch (_) { }
      }

      function schedulePreloading(centerIdx) {
        if (!items.length) return;
        var seen = new Set();
        var offsets = slowNetwork ? [1] : (lastDirection >= 0 ? [1, 2, 3, -1] : [-1, 1, 2, -2]);
        var nextIdx = centerIdx + (lastDirection >= 0 ? 1 : -1);
        if (nextIdx < 0) nextIdx = 0; if (nextIdx >= items.length) nextIdx = items.length - 1;
        var nextItem = items[nextIdx];
        if (nextItem && nextItem.type === 'video' && nextItem.src) { addLinkPreload(nextItem.src, 'video'); }
        for (var k = 0; k < offsets.length; k++) {
          var t = centerIdx + offsets[k];
          if (t < 0 || t >= items.length) continue;
          if (seen.has(t)) continue;
          seen.add(t);
          var it = items[t];
          if (!it || !it.src) continue;
          if (it.type === 'video') { ensureVideoPreloaded(it.src, it.poster); }
          else if (it.type === 'image') {
            var img = new Image(); img.decoding = 'async'; img.loading = 'eager'; img.src = it.src;
          }
        }
        evictIfNeeded();
      }

      function swapTo(index) {
        if (!items.length) return;
        if (index < 0) index = items.length - 1;
        if (index >= items.length) index = 0;
        var oldActive = activeIndex;
        current = index;
        var nextLayer = layers[oldActive ^ 1];
        var oldVid = layers[oldActive].querySelector('video');
        clearLayer(nextLayer);
        var mediaEl = createMediaElement(items[current]);
        nextLayer.appendChild(mediaEl);
        var newVid = (mediaEl && mediaEl.tagName === 'VIDEO') ? mediaEl : null;
        try { crossfadeAudio(oldVid, newVid, AUDIO_FADE_MS); } catch (_) { }
        // Crossfade
        nextLayer.classList.add('is-active');
        layers[oldActive].classList.remove('is-active');
        activeIndex = oldActive ^ 1;
        // Warm up neighbors for faster subsequent swaps
        try { schedulePreloading(current); } catch (_) { }
        // After fade completes, clear the inactive layer completely (guard against racing clears)
        setTimeout(function () {
          var layer = layers[oldActive];
          var isActiveNow = layer.classList.contains('is-active');
          if (!isActiveNow) {
            var old = layer.querySelector('video');
            // If we're in the middle of an audio fade, let the fade handler clean up later
            if (old && old.getAttribute('data-defer-clear') === '1') {
              return;
            }
            if (old) {
              try {
                old.pause();
                var s = old.querySelector('source');
                var src = s && s.src;
                if (src) {
                  old.setAttribute('data-preload-src', src);
                  cachePut(src, old, 'video');
                  preloadBin.appendChild(old);
                }
              } catch (_) { }
            }
            clearLayer(layer);
            ensureMediaVisible();
          }
        }, FADE_MS + 60);
        updateCtaForCurrent();
      }

      function updateActiveItem(idx) {
        if (idx === lastActiveIdx) return;
        if (lastActiveIdx >= 0 && items[lastActiveIdx] && items[lastActiveIdx].el) {
          items[lastActiveIdx].el.classList.remove('active');
        }
        if (idx >= 0 && items[idx] && items[idx].el) {
          items[idx].el.classList.add('active');
        }
        lastActiveIdx = idx;
      }

      function startAuto() {
        stopAuto();
        mode = 'auto';
        autoTimer = setInterval(function () {
          if (mode !== 'auto') return;
          swapTo(current + 1);
        }, AUTO_INTERVAL_MS);
      }

      function stopAuto() {
        if (autoTimer) { clearInterval(autoTimer); autoTimer = null; }
      }

      function resetAutoResume() {
        if (autoResumeTimer) { clearTimeout(autoResumeTimer); autoResumeTimer = null; }
        autoResumeTimer = setTimeout(function () {
          if (mode !== 'auto') { startAuto(); }
        }, AUTO_RESUME_MS);
      }

      function handlePrev() { mode = 'manual'; lastDirection = -1; stopAuto(); swapTo(current - 1); resetAutoResume(); }
      function handleNext() { mode = 'manual'; lastDirection = 1; stopAuto(); swapTo(current + 1); resetAutoResume(); }

      function updateMuteButton() {
        var btn = document.querySelector('.control-icon-btn');
        if (!btn) return;
        btn.setAttribute('aria-pressed', String(!isMuted));
        if (isMuted) { btn.classList.add('is-muted'); } else { btn.classList.remove('is-muted'); }
      }

      function bindControls() {
        var pagerBtn = document.querySelector('.control-pager-btn');
        var muteBtn = document.querySelector('.control-icon-btn');
        var ctaBtn = document.querySelector('.cta-live-btn');
        if (pagerBtn) {
          // Clickable polygons
          var leftPoly = pagerBtn.querySelector('polygon[data-dir="prev"]');
          var rightPoly = pagerBtn.querySelector('polygon[data-dir="next"]');
          if (leftPoly) leftPoly.addEventListener('click', function (e) { e.stopPropagation(); handlePrev(); });
          if (rightPoly) rightPoly.addEventListener('click', function (e) { e.stopPropagation(); handleNext(); });
          // Fallback: click position left/right within button
          pagerBtn.addEventListener('click', function (e) {
            var rect = pagerBtn.getBoundingClientRect();
            var x = e.clientX - rect.left;
            if (x < rect.width / 2) handlePrev(); else handleNext();
          });
        }
        if (muteBtn) muteBtn.addEventListener('click', function () {
          isMuted = !isMuted;
          updateMuteButton();
          // apply to current video if present
          var activeVideo = layers[activeIndex].querySelector('video');
          if (activeVideo) {
            activeVideo.muted = !!isMuted;
            if (!isMuted) { activeVideo.volume = 1; }
          }
        });
        if (ctaBtn) ctaBtn.addEventListener('click', function () {
          var href = ctaBtn.getAttribute('data-href') || '';
          if (href) { window.location.href = href; }
        });
        // Keyboard
        document.addEventListener('keydown', function (e) {
          var key = e.key || e.code;
          if (key === 'ArrowLeft') { e.preventDefault(); handlePrev(); }
          else if (key === 'ArrowRight') { e.preventDefault(); handleNext(); }
        });
      }

      function closestItemToViewportCenter() {
        var vhMid = window.innerHeight / 2;
        var bestIdx = -1;
        var bestDist = Infinity;
        for (var i = 0; i < items.length; i++) {
          var r = items[i].el.getBoundingClientRect();
          var mid = r.top + (r.height / 2);
          var d = Math.abs(mid - vhMid);
          if (d < bestDist) { bestDist = d; bestIdx = i; }
        }
        // Clamp to first index when at or above top
        if (bestIdx < 0 && items.length) { return 0; }
        return bestIdx;
      }

      function onScroll() {
        if (scrollRaf) return;
        scrollRaf = requestAnimationFrame(function () {
          scrollRaf = null;
          if (!items.length) return;
          var idx = closestItemToViewportCenter();
          if (idx >= 0 && idx !== current) {
            lastDirection = (idx > current) ? 1 : -1;
            mode = 'scroll';
            stopAuto();
            swapTo(idx);
            updateActiveItem(idx);
            resetAutoResume();
          } else {
            updateActiveItem(idx);
            resetAutoResume();
          }
          ensureMediaVisible();
        });
      }

      function init() {
        // Retry logic to wait for DOM to be fully rendered
        var retryCount = 0;
        var maxRetries = 20; // ~2 seconds max wait (20 * 100ms)
        function tryInit() {
          collectItems();
          if (items.length > 0) {
            // Items found, proceed with initialization
            swapTo(0);
            bindControls();
            startAuto();
            resetAutoResume();
            updateMuteButton();
            updateCtaForCurrent();
            try { schedulePreloading(current); } catch (_) { }
            // Scroll override
            window.addEventListener('scroll', onScroll, { passive: true });
            window.addEventListener('resize', onScroll);
            // Ensure active state reflects current viewport on load
            onScroll();
            ensureMediaVisible();
          } else if (retryCount < maxRetries) {
            // Items not ready yet, retry after a short delay
            retryCount++;
            // Use requestAnimationFrame to wait for next paint, then setTimeout for additional delay
            requestAnimationFrame(function() {
              setTimeout(tryInit, 100);
            });
          } else {
            // Max retries reached, update CTA with fallback message
            var btn = document.querySelector('.cta-live-btn');
            var textEl = btn ? btn.querySelector('.cta-text') : null;
            if (textEl) {
              textEl.textContent = 'No content available';
              try { textEl.setAttribute('data-text', 'No content available'); textEl.setAttribute('data-base-text', 'No content available'); } catch (_) { }
            }
          }
        }
        tryInit();
      }

      function ready(fn) {
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', fn);
        } else { fn(); }
      }

      // Initialize after dynamic work is rendered
      ready(function () {
        var started = false;
        function startOnce() { if (!started) { started = true; init(); } }
        document.addEventListener('work:rendered', function() {
          // Use requestAnimationFrame to ensure DOM is rendered before initializing
          requestAnimationFrame(function() {
            setTimeout(startOnce, 50); // Small delay to ensure DOM is fully updated
          });
        }, { once: true });
        // Re-collect items and resync when sections expand/collapse
        document.addEventListener('work:updated', function () {
          collectItems();
          if (!items.length) return;
          if (current >= items.length) { current = Math.max(0, items.length - 1); }
          try { schedulePreloading(current); } catch (_) { }
          updateCtaForCurrent();
          onScroll();
          ensureMediaVisible();
        });
        // In case content is already present (static) or event doesn't fire, attempt with retry
        setTimeout(function () { 
          if (!started) { 
            collectItems(); 
            if (items.length) { 
              startOnce(); 
            } else {
              // If no items found, still try init (it has retry logic)
              startOnce();
            }
          } 
        }, 800);
      });
    })();
  </script>

  <script>
    // Match pill border width to visually stretched titles (supports multiples)
    (function () {
      function sizeTitlePills() {
        var containers = document.querySelectorAll('.work-section-title-container');
        if (!containers.length) return;
        containers.forEach(function (container) {
          var title = container.querySelector('.work-section-title');
          if (!title) return;
          var rect = title.getBoundingClientRect();
          var cs = window.getComputedStyle(container);
          container.style.width = rect.width + 'px';
        });
      }
      window.addEventListener('load', sizeTitlePills);
      window.addEventListener('resize', sizeTitlePills);
      sizeTitlePills();
    })();
  </script>

  <script>
    // Stretch pill button text while preserving pill borders
    (function () {
      function ensureWrapped(btn) {
        if (btn.querySelector('.btn-text-stretch')) return;
        var txt = btn.textContent;
        btn.textContent = '';
        var span = document.createElement('span');
        span.className = 'btn-text-stretch';
        span.textContent = txt;
        btn.appendChild(span);
      }

      function sizeButtons() {
        var buttons = document.querySelectorAll('.pill-btn');
        if (!buttons.length) return;
        buttons.forEach(function (btn) {
          ensureWrapped(btn);
          var span = btn.querySelector('.btn-text-stretch');
          // Reset to natural width before measuring
          btn.style.width = 'auto';
          var rect = span.getBoundingClientRect();
          var cs = window.getComputedStyle(btn);
          var padL = parseFloat(cs.paddingLeft) || 10;
          var padR = parseFloat(cs.paddingRight) || 10;
          var borderL = parseFloat(cs.borderLeftWidth) || 0;
          var borderR = parseFloat(cs.borderRightWidth) || 0;
          btn.style.width = Math.ceil(rect.width + padL + padR + borderL + borderR) + 'px';
        });
      }

      window.addEventListener('load', sizeButtons);
      window.addEventListener('resize', sizeButtons);
      sizeButtons();
    })();
  </script>

  <script>
    // Inline 4-line clamp with true inline View More/Less at end of line
    (function () {
      function debounce(fn, wait) { var t; return function () { clearTimeout(t); var args = arguments, ctx = this; t = setTimeout(function () { fn.apply(ctx, args); }, wait); }; }

      function htmlToPlain(html) { var div = document.createElement('div'); div.innerHTML = html; return (div.textContent || div.innerText || '').trim().replace(/\s+/g, ' '); }

      function truncateToFourLines(p, fullHTML, toggle) {
        // Reset to full for measurement
        p.innerHTML = fullHTML;
        if (toggle.parentNode) toggle.parentNode.removeChild(toggle);

        var cs = window.getComputedStyle(p);
        var lineHeight = parseFloat(cs.lineHeight);
        if (!lineHeight || isNaN(lineHeight)) { lineHeight = 24; }
        var maxH = lineHeight * 4;

        // Build a measurer with same width/styles
        var meas = document.createElement('div');
        meas.style.position = 'absolute';
        meas.style.visibility = 'hidden';
        meas.style.pointerEvents = 'none';
        meas.style.whiteSpace = 'normal';
        meas.style.boxSizing = cs.boxSizing;
        meas.style.width = p.getBoundingClientRect().width + 'px';
        meas.style.font = cs.font;
        meas.style.letterSpacing = cs.letterSpacing;
        meas.style.lineHeight = cs.lineHeight;
        meas.style.wordBreak = cs.wordBreak;
        meas.style.wordSpacing = cs.wordSpacing;
        meas.style.padding = cs.padding;
        meas.style.border = '0';
        meas.style.margin = '0';
        p.parentNode.appendChild(meas);

        var plain = htmlToPlain(fullHTML);
        var lo = 0, hi = plain.length, best = 0;

        // Measure anchor width using same classes
        var anchorSample = document.createElement('span');
        anchorSample.className = 'view-more-btn inline-read-toggle';
        anchorSample.innerHTML = 'View More <span class="arrow" aria-hidden="true">‚ÜóÔ∏é</span>';

        var textSpan = document.createElement('span');
        meas.appendChild(textSpan);
        meas.appendChild(document.createTextNode(' '));
        meas.appendChild(anchorSample);

        // Binary search maximum text that fits within 4 lines together with anchor
        while (lo <= hi) {
          var mid = Math.floor((lo + hi) / 2);
          textSpan.textContent = plain.slice(0, mid) + '‚Ä¶';
          if (meas.offsetHeight <= maxH) {
            best = mid; lo = mid + 1;
          } else {
            hi = mid - 1;
          }
        }

        var finalText = plain.slice(0, best) + '‚Ä¶';
        p.textContent = finalText + ' ';
        p.appendChild(toggle);

        meas.parentNode.removeChild(meas);
      }

      function setup() {
        var blocks = document.querySelectorAll('.work-section-description');
        blocks.forEach(function (desc) {
          if (desc._inlineClampInit) return;
          var p = desc.querySelector('p');
          if (!p) return;
          desc._inlineClampInit = true;

          var fullHTML = p.innerHTML;
          var btn = document.createElement('a');
          btn.href = '#';
          btn.className = 'view-more-btn inline-read-toggle';
          btn.setAttribute('aria-expanded', 'false');
          btn.innerHTML = 'View More <span class="arrow" aria-hidden="true">‚ÜóÔ∏é</span>';

          function collapse() {
            btn.setAttribute('aria-expanded', 'false');
            btn.setAttribute('data-state', 'collapsed');
            btn.innerHTML = 'View More <span class="arrow" aria-hidden="true">‚ÜóÔ∏é</span>';
            truncateToFourLines(p, fullHTML, btn);
          }

          function expand() {
            btn.setAttribute('aria-expanded', 'true');
            btn.setAttribute('data-state', 'expanded');
            btn.innerHTML = 'View Less <span class="arrow" aria-hidden="true">‚ÜóÔ∏é</span>';
            p.innerHTML = fullHTML + ' ';
            p.appendChild(btn);
          }

          btn.addEventListener('click', function (e) {
            e.preventDefault();
            var expanded = btn.getAttribute('data-state') === 'expanded';
            if (expanded) { collapse(); } else { expand(); }
          });

          // Initial state
          collapse();

          // Recalculate on resize if collapsed
          window.addEventListener('resize', debounce(function () {
            if (btn.getAttribute('data-state') !== 'expanded') collapse();
          }, 150));
        });
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setup);
      } else {
        setup();
      }
    })();
  </script>

  <script>
    // Slide-in top-row background after scrolling past first viewport
    (function () {
      function updateTopRowBg() {
        var el = document.querySelector('.landing-top-row');
        if (!el) return;
        if (window.scrollY >= window.innerHeight * 0.85) {
          el.classList.add('bg-visible');
        } else {
          el.classList.remove('bg-visible');
        }
      }
      window.addEventListener('scroll', updateTopRowBg, { passive: true });
      window.addEventListener('load', updateTopRowBg);
      updateTopRowBg();
    })();
  </script>

  <script>
    // Toggle .is-stuck on .sticky-header-scroll using an IntersectionObserver
    (function () {
      function initStickyObserver() {
        var sticky = document.querySelector('.sticky-header-scroll');
        if (!sticky || sticky._hasStickyObserver) return;
        sticky._hasStickyObserver = true;

        // Read header height from CSS variable (fallback 60)
        var csRoot = window.getComputedStyle(document.documentElement);
        var headerVar = csRoot.getPropertyValue('--header-h') || '60px';
        var headerPx = parseFloat(headerVar) || 60;

        // Create a sentinel just before the sticky element
        var sentinel = document.createElement('div');
        sentinel.setAttribute('aria-hidden', 'true');
        sentinel.style.position = 'relative';
        sentinel.style.height = '1px';
        sticky.parentNode.insertBefore(sentinel, sticky);

        var obs = new IntersectionObserver(function (entries) {
          var e = entries[0];
          // When sentinel is no longer intersecting the top area (offset by header height), the bar is stuck
          if (e && e.isIntersecting === false) {
            sticky.classList.add('is-stuck');
          } else {
            sticky.classList.remove('is-stuck');
          }
        }, {
          root: null,
          threshold: 0,
          rootMargin: '-' + headerPx + 'px 0px 0px 0px'
        });

        obs.observe(sentinel);
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initStickyObserver);
      } else {
        initStickyObserver();
      }
    })();
  </script>

  <!-- Firebase SDK for loading posts dynamically -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script>
    // Dynamically populate the three sections (DJ, Producer, Creative Director) from Firestore
    (function () {
      // Make UID easy to change
      const TARGET_USER_UID = 'iPzFRI8JYMSA1NyBDQu9dNpeZ0y1';
      const CATEGORIES = ['DJ', 'Producer', 'Creative Director'];

      // Use same config as portfolio loader to avoid mismatches
      const firebaseConfig = {
        apiKey: "AIzaSyBLhjeaX_vl5-7_I9xT1Ae9JMQnLlKCpX4",
        authDomain: "one-earth-cms.firebaseapp.com",
        projectId: "one-earth-cms",
        storageBucket: "one-earth-cms.appspot.com",
        messagingSenderId: "649151856539",
        appId: "1:649151856539:web:3c5b6a1fe176a4f31ed347"
      };

      try {
        if (!window.firebase) return; // SDK not loaded
        if (!firebase.apps || !firebase.apps.length) {
          firebase.initializeApp(firebaseConfig);
        }
      } catch (e) {
        // ignore duplicate init
      }

      if (!window.firebase) return;
      const db = firebase.firestore();

      function isImageUrl(url) {
        if (!url || typeof url !== 'string') return false;
        return /\.(png|jpe?g|webp|gif|avif)$/i.test(url.split('?')[0]);
      }

      function isVideoUrl(url) {
        if (!url || typeof url !== 'string') return false;
        return /\.(mp4|webm|ogg|mov|m4v)$/i.test(url.split('?')[0]);
      }

      function parseCsv(csv) {
        if (!csv) return [];
        return csv.split(',').map(t => t.trim()).filter(Boolean);
      }

      // Try to pick an image-only thumbnail per requirements
      function pickThumbnail(post) {
        // Prefer featuredMedia.url if image
        if (post.featuredMedia && post.featuredMedia.url && isImageUrl(post.featuredMedia.url)) {
          return post.featuredMedia.url;
        }
        // If featuredMedia is video, use its poster image
        if (post.featuredMedia && post.featuredMedia.poster && isImageUrl(post.featuredMedia.poster)) {
          return post.featuredMedia.poster;
        }
        // Backwards compatibility
        if (post.featuredImage && isImageUrl(post.featuredImage)) {
          return post.featuredImage;
        }
        // Fallback: look for cached image in first few sections/items
        if (post.sections && post.sections.length) {
          const firstSections = post.sections.slice(0, 3);
          for (var i = 0; i < firstSections.length; i++) {
            var sec = firstSections[i];
            var items = (sec.items || sec.blocks || []);
            for (var j = 0; j < items.length; j++) {
              var it = items[j];
              if ((it.type === 'media' || it.blockType === 'media') && it.cachedMediaUrl && isImageUrl(it.cachedMediaUrl)) {
                return it.cachedMediaUrl;
              }
            }
          }
        }
        return '';
      }

      function generateExcerpt(post) {
        var text = '';
        if (post.sections && post.sections.length) {
          for (var i = 0; i < post.sections.length; i++) {
            var sec = post.sections[i];
            var items = (sec.items || sec.blocks || []);
            for (var j = 0; j < items.length; j++) {
              var it = items[j];
              var type = it.blockType || it.type;
              if (type === 'body' && it.content) {
                var div = document.createElement('div');
                div.innerHTML = it.content;
                text += (div.textContent || div.innerText || '');
                if (text.length >= 150) break;
              }
            }
            if (text.length >= 150) break;
          }
        }
        if (!text && post.content) {
          var div2 = document.createElement('div');
          div2.innerHTML = post.content;
          text = (div2.textContent || div2.innerText || '');
        }
        text = (text || '').replace(/\s+/g, ' ').trim();
        if (text.length > 150) {
          text = text.slice(0, 150).trimEnd() + '‚Ä¶';
        }
        return text;
      }

      function buildCardHtml(post) {
        var thumb = pickThumbnail(post);
        var tagsCsv = post.keywords || post.tags || '';
        var tags = parseCsv(tagsCsv);
        var tagsHtml = tags.map(function (t) { return '<span class="work-tag">' + t + '</span>'; }).join('');
        var desc = generateExcerpt(post);
        var safeTitle = post.title || 'Untitled';
        var safeAlt = safeTitle + ' thumbnail';

        // Determine featured media for background player (prefer post.featuredMedia)
        var fm = post.featuredMedia || {};
        var mediaUrl = fm.url || post.featuredImage || '';
        var mediaType = fm.type || (isVideoUrl(mediaUrl) ? 'video' : 'image');
        if (!mediaUrl && thumb) { mediaUrl = thumb; mediaType = 'image'; }
        var poster = fm.poster || (mediaType === 'image' ? mediaUrl : (fm.thumbnail || '')) || '';

        // Prefer poster image for the card thumbnail if available; fallback to computed thumb
        var displayImg = (poster && isImageUrl(poster)) ? poster : thumb;
        var imgHtml = displayImg ? ('<img loading="lazy" src="' + displayImg + '" alt="' + safeAlt + '">') : '';

        return (
          '<div class="work-body-item"' +
          ' data-media-type="' + (mediaType || '') + '"' +
          ' data-media-src="' + (mediaUrl || '') + '"' +
          ' data-media-poster="' + (poster || '') + '"' +
          '>' +
          '<div class="work-media">' +
          imgHtml +
          (tagsHtml ? ('<div class="work-tags">' + tagsHtml + '</div>') : '') +
          '</div>' +
          '<h1 class="work-body-item-title">' + safeTitle + '</h1>' +
          '<p class="work-body-item-description">' + (desc || '') + '</p>' +
          '<a class="view-more-btn" href="work.html?id=' + post.id + '" aria-label="View more about ' + safeTitle + '">View More... <span class="arrow" aria-hidden="true">‚ÜóÔ∏é</span></a>' +
          '</div>'
        );
      }

      function getCategoryContainer(category) {
        var sections = document.querySelectorAll('.work-section');
        for (var i = 0; i < sections.length; i++) {
          var s = sections[i];
          var titleEl = s.querySelector('.work-section-title');
          if (titleEl && titleEl.textContent.trim().toLowerCase() === String(category).toLowerCase()) {
            return s.querySelector('.work-body-container');
          }
        }
        return null;
      }

      function setupSectionToggle(container) {
        if (!container) return;
        var items = container.querySelectorAll('.work-body-item');
        var existingToggle = container.querySelector('.section-toggle-row');
        if (existingToggle && existingToggle.parentNode) { existingToggle.parentNode.removeChild(existingToggle); }
        if (items.length <= 3) return;
        for (var i = 3; i < items.length; i++) { items[i].setAttribute('data-collapsed', 'true'); }
        var row = document.createElement('div');
        row.className = 'section-toggle-row';
        var btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'section-toggle-btn';
        btn.setAttribute('aria-expanded', 'false');
        btn.textContent = 'VIEW ALL';
        row.appendChild(btn);
        container.appendChild(row);
        btn.addEventListener('click', function () {
          var expanded = btn.getAttribute('aria-expanded') === 'true';
          if (expanded) {
            for (var j = 3; j < items.length; j++) { items[j].setAttribute('data-collapsed', 'true'); }
            btn.setAttribute('aria-expanded', 'false');
            btn.textContent = 'VIEW ALL';
          } else {
            for (var k = 3; k < items.length; k++) { items[k].removeAttribute('data-collapsed'); }
            btn.setAttribute('aria-expanded', 'true');
            btn.textContent = 'VIEW LESS';
          }
          try { document.dispatchEvent(new CustomEvent('work:updated')); } catch (_) { }
        });
      }

      function renderCategory(category, posts) {
        var container = getCategoryContainer(category);
        if (!container) return;
        if (!posts || posts.length === 0) {
          container.innerHTML = '<div class="coming-soon">Coming soon</div>';
          return;
        }
        var html = posts.map(buildCardHtml).join('');
        container.innerHTML = html;

        // Make the entire card clickable to the same destination as the CTA
        var items = container.querySelectorAll('.work-body-item');
        items.forEach(function (item) {
          var link = item.querySelector('.view-more-btn');
          if (!link || !link.href) return;
          item.setAttribute('role', 'link');
          item.setAttribute('tabindex', '0');
          item.addEventListener('click', function (e) {
            if (e.target && e.target.closest && e.target.closest('a')) return; // allow native link clicks
            window.location.href = link.href;
          });
          item.addEventListener('keydown', function (e) {
            var key = e.key || e.code;
            if (key === 'Enter' || key === 'NumpadEnter' || e.keyCode === 13) {
              window.location.href = link.href;
            }
          });
        });

        // Apply section-level View All/Less toggle
        setupSectionToggle(container);
      }

      async function loadAndRender() {
        try {
          var snap = await db.collection('users').doc(TARGET_USER_UID)
            .collection('items')
            .where('type', '==', 'blog')
            .orderBy('datePosted', 'desc')
            .get();

          var all = [];
          snap.forEach(function (doc) { all.push(Object.assign({ id: doc.id }, doc.data())); });

          // Normalize featuredMedia from featuredImage
          all.forEach(function (p) {
            if (!p.featuredMedia && p.featuredImage) { p.featuredMedia = { url: p.featuredImage }; }
          });

          // Group by the three categories
          CATEGORIES.forEach(function (cat) {
            var posts = all.filter(function (p) { return (p.category || '').toLowerCase() === cat.toLowerCase(); });
            renderCategory(cat, posts);
          });
          // Wait for DOM to be fully rendered before dispatching event
          requestAnimationFrame(function() {
            requestAnimationFrame(function() {
              try { document.dispatchEvent(new CustomEvent('work:rendered')); } catch (_) { }
            });
          });
        } catch (e) {
          // On error, show coming soon to avoid breaking layout
          CATEGORIES.forEach(function (cat) { renderCategory(cat, []); });
          // Optional: console.error('Error loading posts:', e);
          // Wait for DOM to be fully rendered before dispatching event
          requestAnimationFrame(function() {
            requestAnimationFrame(function() {
              try { document.dispatchEvent(new CustomEvent('work:rendered')); } catch (_) { }
            });
          });
        }
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadAndRender);
      } else {
        loadAndRender();
      }
    })();
  </script>

  <script>
    // Pill navigation: smooth scroll + active state sync with URL hash
    (function () {
      function getOffset() {
        try {
          var csRoot = window.getComputedStyle(document.documentElement);
          var val = (csRoot.getPropertyValue('--section-offset') || '').trim();
          var n = parseFloat(val);
          if (!isNaN(n)) return n;
        } catch (_) { }
        return 185; // fallback desktop
      }
      var prefersReduced = false;
      try { prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches; } catch (_) { }

      function $all(sel, root) { return Array.prototype.slice.call((root || document).querySelectorAll(sel)); }

      function init() {
        var pills = $all('.pill-btn[data-target]');
        var sections = $all('.work-section-container[data-section]');
        if (!pills.length || !sections.length) return;

        var sticky = document.querySelector('.sticky-header-scroll');
        function isStuck() { return !!(sticky && sticky.classList && sticky.classList.contains('is-stuck')); }

        var nameToSection = {};
        sections.forEach(function (sec) { var n = (sec.getAttribute('data-section') || '').toLowerCase(); if (n) nameToSection[n] = sec; });

        var nameToPill = {};
        pills.forEach(function (btn) { var n = (btn.getAttribute('data-target') || '').toLowerCase(); if (n) nameToPill[n] = btn; });

        var activeName = '';
        function clearActive() {
          Object.keys(nameToPill).forEach(function (k) { var b = nameToPill[k]; if (b) { b.classList.remove('active'); } });
          activeName = '';
        }
        function setActive(name, updateHash) {
          if (!name || name === activeName) return;
          Object.keys(nameToPill).forEach(function (k) { var b = nameToPill[k]; if (b) { b.classList.toggle('active', k === name); } });
          activeName = name;
          if (updateHash) { try { history.replaceState(null, '', '#' + name); } catch (_) { } }
        }

        function easeInOutQuad(t) { return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t; }
        function animatedScrollTo(targetY, duration) {
          if (prefersReduced || duration <= 0) { window.scrollTo(0, targetY); return; }
          var startY = window.scrollY || window.pageYOffset;
          var delta = targetY - startY;
          var startTime = null;
          function step(ts) {
            if (!startTime) startTime = ts;
            var t = Math.min(1, (ts - startTime) / duration);
            var eased = easeInOutQuad(t);
            window.scrollTo(0, Math.round(startY + delta * eased));
            if (t < 1) requestAnimationFrame(step);
          }
          requestAnimationFrame(step);
        }

        function scrollToSection(name) {
          var el = nameToSection[name];
          if (!el) return;
          // Use native smooth scroll + CSS scroll-margin-top to avoid double-click offset issues
          try {
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
          } catch (_) {
            // Fallback if smooth not supported
            var rect = el.getBoundingClientRect();
            var absoluteY = (window.scrollY || window.pageYOffset) + rect.top;
            var targetY = Math.max(0, absoluteY - getOffset());
            animatedScrollTo(targetY, 600);
          }
          // Wait for scroll to settle (mobile URL bar collapse, active-row padding), then one smooth fine-tune
          (function () {
            var start = Date.now();
            var lastY = window.scrollY || window.pageYOffset;
            var stable = 0;
            var neededStableFrames = 6; // ~100ms
            var maxMs = 1400; // hard cap
            function tick() {
              var y = window.scrollY || window.pageYOffset;
              if (Math.abs(y - lastY) < 1) { stable++; } else { stable = 0; }
              lastY = y;
              if (stable >= neededStableFrames || (Date.now() - start) > maxMs) {
                var r = el.getBoundingClientRect();
                var gap = Math.round(r.top - getOffset());
                if (Math.abs(gap) > 2) {
                  try { window.scrollBy({ top: gap, behavior: 'smooth' }); }
                  catch (_) { window.scrollTo(0, (window.scrollY || window.pageYOffset) + gap); }
                }
              } else {
                requestAnimationFrame(tick);
              }
            }
            requestAnimationFrame(tick);
          })();
          setActive(name, true);
        }

        pills.forEach(function (btn) {
          btn.addEventListener('click', function () {
            var n = (btn.getAttribute('data-target') || '').toLowerCase();
            if (!n) return;
            scrollToSection(n);
          });
        });

        var rafId = null;
        function onScroll() {
          if (rafId) return;
          rafId = requestAnimationFrame(function () {
            rafId = null;
            if (!isStuck()) { clearActive(); return; }
            var topRef = getOffset() + 1;
            var best = { name: activeName, dist: Infinity };
            sections.forEach(function (sec) {
              var name = (sec.getAttribute('data-section') || '').toLowerCase();
              var r = sec.getBoundingClientRect();
              var d = Math.abs(r.top - topRef) * (r.top < topRef ? 0.9 : 1.0);
              if (d < best.dist) { best.name = name; best.dist = d; }
            });
            if (best.name && best.name !== activeName) { setActive(best.name, false); }
          });
        }
        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', onScroll);

        // Also react immediately to sticky state changes
        if (sticky && window.MutationObserver) {
          try {
            var mo = new MutationObserver(function () { if (!isStuck()) { clearActive(); } else { onScroll(); } });
            mo.observe(sticky, { attributes: true, attributeFilter: ['class'] });
          } catch (_) { }
        }

        function initFromHash() {
          var h = (location.hash || '').replace('#', '').toLowerCase();
          if (h && nameToSection[h]) { setTimeout(function () { scrollToSection(h); }, 50); }
          else { clearActive(); onScroll(); }
        }

        clearActive();
        initFromHash();
        document.addEventListener('work:rendered', function () { initFromHash(); onScroll(); });
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else { init(); }
    })();
  </script>

</body>

<footer>
  <div class="footer-container">
    <div class="footer-content">
      <div class="work-section-title-container footer-margin">
        <h1 class="work-section-title">Contact</h1>
      </div>

      <div class="footer-contact-container">
        <div class="footer-contact-item">
          <h1 class="footer-contact-item-title"><a href="mailto:KEANULLMGMT@GMAIL.COM">KEANULLMGMT@GMAIL.COM</a></h1>
        </div>
        <div class="footer-contact-item">
          <div class="icon-buttons" aria-label="Social links">
            <a class="icon-btn" href="https://www.instagram.com/keanulaurenceluca/" aria-label="Instagram">
              <img src="static/img/icon-instagram-white.svg" alt="Instagram">
            </a>
            <a class="icon-btn" href="https://open.spotify.com/artist/2DLHZ28eAcr6zDVYqlujDq?si=7Ceg13E0QzuzoEqwZhU6Sg"
              aria-label="Spotify">
              <img src="static/img/spotifyicon.png" width="15" height="15" alt="Spotify">
            </a>
            <a class="icon-btn" href="https://www.youtube.com/channel/UCV5C7Pa3zvjafTTE7fNdXzQ" aria-label="Youtube">
              <img src="static/img/icon-youtube-white.svg" alt="Youtube">
            </a>
          </div>


        </div>
      </div>

      <div class="footer-info-container">
        <p class="footer-info-item-title">Keanu Laurence Luca ¬© 2025 | Website Designed & Developed by üåê <a
            href="https://kr-net.work/?link=oneearth" target="_blank" rel="noopener">1 Earth Productions</a></p>
      </div>


    </div>
  </div>

</footer>



</html>

</html>
